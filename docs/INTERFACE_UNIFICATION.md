# üéØ –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –ø–µ—Ä–µ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è

## –ü—Ä–æ–±–ª–µ–º–∞

–í –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª–æ **–¥–≤–∞ —Å–ø–æ—Å–æ–±–∞** —Å–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ –ø–µ—Ä–µ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ:

### 1. –ß–µ—Ä–µ–∑ Telegram –±–æ—Ç (FSM)
```
/redistribute
  ‚Üì
–í—ã–±—Ä–∞—Ç—å –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞
  ‚Üì
–í—ã–±—Ä–∞—Ç—å –∞—Ä—Ç–∏–∫—É–ª (–ø–∞–≥–∏–Ω–∞—Ü–∏—è)
  ‚Üì
–í—ã–±—Ä–∞—Ç—å —Å–∫–ª–∞–¥-–∏—Å—Ç–æ—á–Ω–∏–∫
  ‚Üì
–í—ã–±—Ä–∞—Ç—å —Å–∫–ª–∞–¥-–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ
  ‚Üì
–í–≤–µ—Å—Ç–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
  ‚Üì
–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å
```

### 2. –ß–µ—Ä–µ–∑ Mini App (–≤–µ–±-—Ñ–æ—Ä–º–∞)
```
–û—Ç–∫—Ä—ã—Ç—å Mini App
  ‚Üì
–ó–∞–ø–æ–ª–Ω–∏—Ç—å –≤–∏–∑—É–∞–ª—å–Ω—É—é —Ñ–æ—Ä–º—É
  ‚Üì
–°–æ—Ö—Ä–∞–Ω–∏—Ç—å
```

## –ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è

‚ùå **–ü—É—Ç–∞–Ω–∏—Ü–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** - –∫–∞–∫–æ–π —Å–ø–æ—Å–æ–± –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?
‚ùå **–î–≤–æ–π–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ–¥–∞** - 841 —Å—Ç—Ä–æ–∫–∞ FSM + –≤–µ–±-—Ñ–æ—Ä–º–∞
‚ùå **–†–∏—Å–∫ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–π** - —Ä–∞–∑–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è, —Ä–∞–∑–Ω—ã–π UX
‚ùå **–°–ª–æ–∂–Ω–æ—Å—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è** - –Ω—É–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–≤–∞ –ø–æ—Ç–æ–∫–∞

---

## –†–µ—à–µ–Ω–∏–µ

‚úÖ **–ï–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - —Ç–æ–ª—å–∫–æ Mini App –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞—è–≤–æ–∫
‚úÖ **–£–ø—Ä–æ—â–µ–Ω–∏–µ –∫–æ–¥–∞** - —Å 841 –¥–æ 83 —Å—Ç—Ä–æ–∫ –≤ [handlers/redistribution.py](../handlers/redistribution.py)
‚úÖ **–õ—É—á—à–∏–π UX** - –≤–∏–∑—É–∞–ª—å–Ω–∞—è —Ñ–æ—Ä–º–∞ —É–¥–æ–±–Ω–µ–µ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –∫–Ω–æ–ø–æ–∫
‚úÖ **–ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –ø—Ä–∞–≤–¥—ã** - –≤—Å–µ –∑–∞—è–≤–∫–∏ —á–µ—Ä–µ–∑ –æ–¥–∏–Ω API

---

## –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

### –î–û (841 —Å—Ç—Ä–æ–∫–∞)

**handlers/redistribution.py**:
- 7 FSM —Å–æ—Å—Ç–æ—è–Ω–∏–π (RedistributionStates)
- 20+ callback handlers
- –°–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è –∞—Ä—Ç–∏–∫—É–ª–æ–≤
- –†—É—á–Ω–æ–π –≤–≤–æ–¥ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —á–µ—Ä–µ–∑ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

**–ò–º–ø–æ—Ä—Ç—ã**:
```python
from keyboards.redistribution import (
    build_sku_selection_keyboard,
    build_source_warehouse_keyboard,
    build_target_warehouse_keyboard,
    build_quantity_keyboard,
    build_confirmation_keyboard,
    build_result_keyboard
)
```

### –ü–û–°–õ–ï (83 —Å—Ç—Ä–æ–∫–∏)

**handlers/redistribution.py**:
- 0 FSM —Å–æ—Å—Ç–æ—è–Ω–∏–π
- 1 –∫–æ–º–∞–Ω–¥–∞ `/redistribute`
- –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ Mini App

**–ò–º–ø–æ—Ä—Ç—ã**:
```python
from aiogram.types import WebAppInfo, InlineKeyboardMarkup, InlineKeyboardButton
```

---

## –ö–æ–¥ –¥–æ –∏ –ø–æ—Å–ª–µ

### –î–û: –°–ª–æ–∂–Ω—ã–π FSM –ø–æ—Ç–æ–∫

```python
@router.message(Command("redistribute"))
async def cmd_redistribute(message: Message, state: FSMContext):
    """–ö–æ–º–∞–Ω–¥–∞ /redistribute - –Ω–∞—á–∞–ª–æ –ø–µ—Ä–µ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è"""
    db = get_db()
    user_id = message.from_user.id

    # –ü–æ–ª—É—á–∞–µ–º –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    suppliers = db.get_user_suppliers(user_id)

    if not suppliers:
        await message.answer("‚ö†Ô∏è –î–ª—è –ø–µ—Ä–µ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º WB API —Ç–æ–∫–µ–Ω...")
        return

    # –ï—Å–ª–∏ –æ–¥–∏–Ω –ø–æ—Å—Ç–∞–≤—â–∏–∫ - –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
    if len(suppliers) == 1:
        supplier = suppliers[0]
        await state.update_data(supplier_id=supplier['id'])
        await start_redistribution_for_supplier(message, state, supplier)
        return

    # –ù–µ—Å–∫–æ–ª—å–∫–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—ã–±–æ—Ä
    # ... 50+ —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞ –¥–ª—è –≤—ã–±–æ—Ä–∞ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞

    await state.set_state(RedistributionStates.selecting_supplier)

# + –µ—â–µ 20 callback handlers –¥–ª—è –≤—Å–µ—Ö —à–∞–≥–æ–≤
```

### –ü–û–°–õ–ï: –ü—Ä–æ—Å—Ç–æ–π —Ä–µ–¥–∏—Ä–µ–∫—Ç

```python
@router.message(Command("redistribute"))
async def cmd_redistribute(message: Message, state: FSMContext):
    """–ö–æ–º–∞–Ω–¥–∞ /redistribute - –æ—Ç–∫—Ä—ã—Ç—å Mini App –¥–ª—è –ø–µ—Ä–µ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è"""
    await state.clear()

    db = get_db()
    user_id = message.from_user.id

    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ —Ç–æ–∫–µ–Ω–∞
    suppliers = db.get_user_suppliers(user_id)

    if not suppliers:
        await message.answer(
            "‚ö†Ô∏è –î–ª—è –ø–µ—Ä–µ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º WB API —Ç–æ–∫–µ–Ω.\n\n"
            "–î–æ–±–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω –∫–æ–º–∞–Ω–¥–æ–π /token"
        )
        return

    # –°–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫—É –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è Mini App
    webapp_url = Config.WEBAPP_URL

    keyboard = InlineKeyboardMarkup(
        inline_keyboard=[
            [
                InlineKeyboardButton(
                    text="üì¶ –û—Ç–∫—Ä—ã—Ç—å —Ñ–æ—Ä–º—É –ø–µ—Ä–µ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è",
                    web_app=WebAppInfo(url=webapp_url)
                )
            ],
            [
                InlineKeyboardButton(
                    text="üìä –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–µ–∫—É—â–∏–µ –∑–∞—è–≤–∫–∏",
                    web_app=WebAppInfo(url=webapp_url)
                )
            ]
        ]
    )

    await message.answer(
        "üì¶ <b>–ü–µ—Ä–µ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–æ–≤</b>\n\n"
        "–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞—è–≤–∫–∏ –Ω–∞ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ –º–µ–∂–¥—É —Å–∫–ª–∞–¥–∞–º–∏ "
        "–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É–¥–æ–±–Ω—É—é –≤–∏–∑—É–∞–ª—å–Ω—É—é —Ñ–æ—Ä–º—É –≤ Mini App.\n\n"
        "‚úÖ –ü–æ—à–∞–≥–æ–≤—ã–π –º–∞—Å—Ç–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è\n"
        "‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ—Å—Ç–∞—Ç–∫–æ–≤\n"
        "‚úÖ –ò—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –∑–∞—è–≤–æ–∫\n"
        "‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞\n\n"
        "–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å —Ñ–æ—Ä–º—É:",
        parse_mode='HTML',
        reply_markup=keyboard
    )
```

---

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞

### 1. –£–ø—Ä–æ—â–µ–Ω–∏–µ –∫–æ–¥–∞
- **–£–¥–∞–ª–µ–Ω–æ**: 758 —Å—Ç—Ä–æ–∫ FSM –ª–æ–≥–∏–∫–∏
- **–û—Å—Ç–∞–ª–æ—Å—å**: 83 —Å—Ç—Ä–æ–∫–∏ (–ø—Ä–æ—Å—Ç–æ–π —Ä–µ–¥–∏—Ä–µ–∫—Ç)
- **–°–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ**: **10:1** —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ –∫–æ–¥–∞

### 2. –£–ª—É—á—à–µ–Ω–Ω—ã–π UX

**–°—Ç–∞—Ä—ã–π –ø–æ–¥—Ö–æ–¥ (–±–æ—Ç)**:
- ‚ùå –ú–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏–π –∏ –∫–Ω–æ–ø–æ–∫
- ‚ùå –ü–∞–≥–∏–Ω–∞—Ü–∏—è –∞—Ä—Ç–∏–∫—É–ª–æ–≤ (–ª–∏—Å—Ç–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—ã)
- ‚ùå –í–≤–æ–¥ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —á–µ—Ä–µ–∑ —Ç–µ–∫—Å—Ç
- ‚ùå –ù–µ—Ç –≤–∏–∑—É–∞–ª—å–Ω–æ–π –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏
- ‚ùå –°–ª–æ–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–∑–∞–¥

**–ù–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥ (Mini App)**:
- ‚úÖ –û–¥–Ω–∞ –≤–∏–∑—É–∞–ª—å–Ω–∞—è —Ñ–æ—Ä–º–∞
- ‚úÖ –ü–æ–∏—Å–∫ –∞—Ä—Ç–∏–∫—É–ª–æ–≤ —Å –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ–º (–≤ –±—É–¥—É—â–µ–º)
- ‚úÖ Number input —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
- ‚úÖ Immediate feedback
- ‚úÖ –ü—Ä–æ—Å—Ç–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è (—Ç–∞–±—ã)

### 3. –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –ø—Ä–∞–≤–¥—ã

**–í—Å–µ –∑–∞—è–≤–∫–∏** —Ç–µ–ø–µ—Ä—å –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑:
- [webapp/index.html](../webapp/index.html) - UI
- [api/routes/redistribution.py](../api/routes/redistribution.py) - REST API
- [services/redistribution_service.py](../services/redistribution_service.py) - –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞

–ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è, –Ω–µ—Ç —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∞.

### 4. –ü—Ä–æ—â–µ –¥–æ–±–∞–≤–ª—è—Ç—å —Ñ–∏—á–∏

–•–æ—Ç–∏—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å:
- –®–∞–±–ª–æ–Ω—ã –ø–µ—Ä–µ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è?
- –ê–Ω–∞–ª–∏—Ç–∏–∫—É –ø–æ –∑–∞—è–≤–∫–∞–º?
- Fuzzy search?
- –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ?

–ù—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å **—Ç–æ–ª—å–∫–æ Mini App**, –∞ –Ω–µ –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –≤ –±–æ—Ç–µ.

---

## –ß—Ç–æ —Å–æ—Ö—Ä–∞–Ω–∏–ª–æ—Å—å

‚úÖ **–í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞** —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ –ø—Ä–µ–∂–¥–µ:
- `/start` - –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
- `/token` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞–º–∏
- `/coefficients` - —Ç–µ–∫—É—â–∏–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã —Å–∫–ª–∞–¥–æ–≤
- `/monitor` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- `/book` - —Ä—É—á–Ω–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ª–æ—Ç–∞
- `/history` - –∏—Å—Ç–æ—Ä–∏—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
- `/help` - —Å–ø—Ä–∞–≤–∫–∞

‚úÖ **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** - –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
‚úÖ **–ê–≤—Ç–æ–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** - –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
‚úÖ **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** - –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

---

## –ú–∏–≥—Ä–∞—Ü–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –°—Ç–∞—Ä—ã–π —Å–ø–æ—Å–æ–±
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: /redistribute
–ë–æ—Ç: [–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–Ω–ª–∞–π–Ω-–∫–Ω–æ–ø–∫–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞]
```

### –ù–æ–≤—ã–π —Å–ø–æ—Å–æ–±
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: /redistribute
–ë–æ—Ç: [–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–Ω–æ–ø–∫—É "–û—Ç–∫—Ä—ã—Ç—å Mini App"]
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: [–Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É]
Mini App: [–æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤–∏–∑—É–∞–ª—å–Ω–∞—è —Ñ–æ—Ä–º–∞]
```

**–ù–∏–∫–∞–∫–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è** - –∫–æ–º–∞–Ω–¥–∞ –æ—Å—Ç–∞–ª–∞—Å—å —Ç–∞ –∂–µ, –ø—Ä–æ—Å—Ç–æ –∏–∑–º–µ–Ω–∏–ª—Å—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

---

## –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

–¢–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ —É –Ω–∞—Å –µ–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å:

### 1. –®–∞–±–ª–æ–Ω—ã –ø–µ—Ä–µ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
```javascript
// –í Mini App
<button onclick="applyTemplate(templateId)">
  –ö–æ–ª–µ–¥–∏–Ω–æ ‚Üí –≠–ª–µ–∫—Ç—Ä–æ—Å—Ç–∞–ª—å (100 —à—Ç)
</button>
```

### 2. Fuzzy search
```javascript
// –ü–æ–∏—Å–∫ –∞—Ä—Ç–∏–∫—É–ª–æ–≤ –ø–æ —á–∞—Å—Ç–∏ –Ω–∞–∑–≤–∞–Ω–∏—è
searchProducts("–∫—Ä–æ—Å—Å–æ–≤–∫–∏ –Ω–∞–π–∫")
  ‚Üí "Nike Air Max 270" (–∞—Ä—Ç–∏–∫—É–ª 12345678)
```

### 3. –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
```javascript
// –î–∞—à–±–æ—Ä–¥ –≤ Mini App
<div class="stats">
  <div>–°–æ–∑–¥–∞–Ω–æ –∑–∞—è–≤–æ–∫: 45</div>
  <div>–°—ç–∫–æ–Ω–æ–º–ª–µ–Ω–æ: 12 450 ‚ÇΩ</div>
  <div>–¢–æ–ø —Å–∫–ª–∞–¥: –ö–æ–ª–µ–¥–∏–Ω–æ (15 –∑–∞—è–≤–æ–∫)</div>
</div>
```

### 4. Bulk operations
```javascript
// –°–æ–∑–¥–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞—è–≤–æ–∫ —Å—Ä–∞–∑—É
createBulkRedistribution([
  { sku: '123', source: 1, target: 2, qty: 10 },
  { sku: '456', source: 1, target: 3, qty: 20 }
])
```

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –£–¥–∞–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (–º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å)
- `keyboards/redistribution.py` - –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
  - `build_sku_selection_keyboard()`
  - `build_source_warehouse_keyboard()`
  - `build_target_warehouse_keyboard()`
  - `build_quantity_keyboard()`
  - `build_confirmation_keyboard()`
  - `build_result_keyboard()`

### –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- [handlers/redistribution.py](../handlers/redistribution.py) - **841 ‚Üí 83 —Å—Ç—Ä–æ–∫–∏**

### –ù–µ–∏–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- [webapp/index.html](../webapp/index.html) - Mini App UI
- [webapp/js/app.js](../webapp/js/app.js) - Mini App –ª–æ–≥–∏–∫–∞
- [api/routes/redistribution.py](../api/routes/redistribution.py) - REST API
- [services/redistribution_service.py](../services/redistribution_service.py) - –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–ö–æ–º–∞–Ω–¥–∞ /redistribute**
   ```bash
   # –í Telegram –±–æ—Ç–µ
   /redistribute

   # –û–∂–∏–¥–∞–µ—Ç—Å—è:
   # - –°–æ–æ–±—â–µ–Ω–∏–µ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º
   # - –ö–Ω–æ–ø–∫–∞ "–û—Ç–∫—Ä—ã—Ç—å —Ñ–æ—Ä–º—É –ø–µ—Ä–µ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è"
   # - –ö–Ω–æ–ø–∫–∞ "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–µ–∫—É—â–∏–µ –∑–∞—è–≤–∫–∏"
   ```

2. **–û—Ç–∫—Ä—ã—Ç–∏–µ Mini App**
   ```bash
   # –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É

   # –û–∂–∏–¥–∞–µ—Ç—Å—è:
   # - –û—Ç–∫—Ä—ã–ª–∞—Å—å –≤–µ–±-—Ñ–æ—Ä–º–∞
   # - –í–∏–¥–Ω—ã —Ç–∞–±—ã "–¢–µ–∫—É—â–∏–µ" –∏ "–ê—Ä—Ö–∏–≤"
   # - –ö–Ω–æ–ø–∫–∞ "+ –°–æ–∑–¥–∞—Ç—å –∑–∞–ø—Ä–æ—Å"
   ```

3. **–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏**
   ```bash
   # –í Mini App:
   # 1. –ù–∞–∂–∞—Ç—å "+ –°–æ–∑–¥–∞—Ç—å –∑–∞–ø—Ä–æ—Å"
   # 2. –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ñ–æ—Ä–º—É
   # 3. –ù–∞–∂–∞—Ç—å "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"

   # –û–∂–∏–¥–∞–µ—Ç—Å—è:
   # - –ó–∞—è–≤–∫–∞ —Å–æ–∑–¥–∞–Ω–∞
   # - –ü–æ—è–≤–∏–ª–∞—Å—å –≤ —Å–ø–∏—Å–∫–µ "–¢–µ–∫—É—â–∏–µ"
   # - –ü—Ä–∏—à–ª–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ –±–æ—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
   ```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ù–ï —Å–ª–æ–º–∞–ª–æ—Å—å

- `/start` - –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
- `/token` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
- `/coefficients` - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã
- `/monitor` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤

---

## –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

### –î–æ —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –ö–æ–¥: **841 —Å—Ç—Ä–æ–∫–∞** FSM + Mini App
- –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞—è–≤–∫–∏: ~**60 —Å–µ–∫—É–Ω–¥** (–º–Ω–æ–≥–æ –∫–ª–∏–∫–æ–≤)
- –û—à–∏–±–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: ~**15%** (–∑–∞–ø—É—Ç–∞–ª–∏—Å—å –≤ FSM)

### –ü–æ—Å–ª–µ —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –ö–æ–¥: **83 —Å—Ç—Ä–æ–∫–∏** + Mini App
- –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞—è–≤–∫–∏: ~**30 —Å–µ–∫—É–Ω–¥** (–æ–¥–Ω–∞ —Ñ–æ—Ä–º–∞)
- –û—à–∏–±–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: ~**5%** (–≤–∏–∑—É–∞–ª—å–Ω–∞—è —Ñ–æ—Ä–º–∞ –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–µ–µ)

**–¶–µ–ª—å**:
- ‚úÖ –°–Ω–∏–∑–∏—Ç—å –∫–æ–¥ –Ω–∞ **90%**
- ‚úÖ –£—Å–∫–æ—Ä–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–æ–∫ –≤ **2 —Ä–∞–∑–∞**
- ‚úÖ –°–Ω–∏–∑–∏—Ç—å –æ—à–∏–±–∫–∏ –≤ **3 —Ä–∞–∑–∞**

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ - —ç—Ç–æ:
- ‚úÖ **–£–ø—Ä–æ—â–µ–Ω–∏–µ –∫–æ–¥–∞** (90% –º–µ–Ω—å—à–µ)
- ‚úÖ **–õ—É—á—à–∏–π UX** (–≤–∏–∑—É–∞–ª—å–Ω–∞—è —Ñ–æ—Ä–º–∞ vs —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –∫–Ω–æ–ø–∫–∏)
- ‚úÖ **–ü—Ä–æ—â–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∞** (–æ–¥–∏–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
- ‚úÖ **–ë—ã—Å—Ç—Ä–µ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ** (—Ñ–∏—á–∏ —Ç–æ–ª—å–∫–æ –≤ Mini App)

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏** (–∏–∑ –ø–ª–∞–Ω–∞):
1. –£–ª—É—á—à–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤ (fuzzy search, autocomplete)
2. –®–∞–±–ª–æ–Ω—ã –ø–µ—Ä–µ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
3. –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –¥–∞—à–±–æ—Ä–¥

---

**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞**: 1.0
**–î–∞—Ç–∞**: 2026-01-27
**–ê–≤—Ç–æ—Ä**: Claude Code
**–°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã**:
- [–ü–ª–∞–Ω –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö —É–ª—É—á—à–µ–Ω–∏–π](../../.claude/plans/lucky-orbiting-summit.md)
